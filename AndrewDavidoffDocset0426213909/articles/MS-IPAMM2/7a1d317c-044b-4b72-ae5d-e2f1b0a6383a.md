<html dir="LTR" xmlns:mshelp="http://msdn.microsoft.com/mshelp" xmlns:ddue="http://ddue.schemas.microsoft.com/authoring/2003/5" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:tool="http://www.microsoft.com/tooltip">
 <body>
 <div id="header">
 <h1 class="heading">4.3 Enumerating the Address Ranges</h1>
 </div>
 <div id="mainSection">
 <div id="mainBody">
 <div id="allHistory" class="saveHistory"></div>
 <div id="sectionSection0" class="section" name="collapseableSection">
 

<p>This section captures the enumeration sequence between the
client and server for enumerating the address ranges.</p>

<p>The following is the <a href="21b4a631-8f28-420f-822f-c5f879d5046e.md#gt_96185df3-4677-478c-b239-f72fcf514c59">SOAP message</a> request for
enumerating all the address ranges.</p>

<dl>
<dd>
<div><pre> &lt;s:Envelope xmlns:a=&quot;http://www.w3.org/2005/08/addressing&quot; xmlns:s=&quot;http://www.w3.org/2003/05/soap-envelope&quot;&gt;
   &lt;s:Header&gt;
     &lt;a:Action s:mustUnderstand=&quot;1&quot;&gt;http://Microsoft.Windows.Ipam/IIpamEnumerator/InitializeEnumeration&lt;/a:Action&gt;
     &lt;a:MessageID&gt;urn:uuid:cada78c6-1a4b-4c58-bf53-b153b893c46a&lt;/a:MessageID&gt;
     &lt;a:ReplyTo&gt;
       &lt;a:Address&gt;http://www.w3.org/2005/08/addressing/anonymous&lt;/a:Address&gt;
     &lt;/a:ReplyTo&gt;
   &lt;/s:Header&gt;
   &lt;s:Body&gt;
     &lt;InitializeEnumeration xmlns=&quot;http://Microsoft.Windows.Ipam&quot;&gt;
       &lt;parameters xmlns:i=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; i:type=&quot;IPRangeByAddressSpaceAndVirtualizationTypeParameters&quot;&gt;
         &lt;FetchAllData&gt;false&lt;/FetchAllData&gt;
         &lt;IncludeCustomFieldValues&gt;false&lt;/IncludeCustomFieldValues&gt;
         &lt;ObjectType&gt;IPRange&lt;/ObjectType&gt;
         &lt;AddressFamily&gt;InterNetwork&lt;/AddressFamily&gt;
         &lt;AddressSpaceRecordID&gt;1&lt;/AddressSpaceRecordID&gt;
         &lt;VirtualizationType i:nil=&quot;true&quot; /&gt;
       &lt;/parameters&gt;
     &lt;/InitializeEnumeration&gt;
   &lt;/s:Body&gt;
 &lt;/s:Envelope&gt;
  
</pre></div>
</dd></dl>

<p>The following is the SOAP response to the previous request
denoting the successful processing of the request.</p>

<dl>
<dd>
<div><pre> &lt;s:Envelope xmlns:s=&quot;http://www.w3.org/2003/05/soap-envelope&quot; xmlns:a=&quot;http://www.w3.org/2005/08/addressing&quot;&gt;
   &lt;s:Header&gt;
     &lt;a:Action s:mustUnderstand=&quot;1&quot;&gt;http://Microsoft.Windows.Ipam/IIpamEnumerator/InitializeEnumerationResponse&lt;/a:Action&gt;
     &lt;a:RelatesTo&gt;urn:uuid:cada78c6-1a4b-4c58-bf53-b153b893c46a&lt;/a:RelatesTo&gt;
     &lt;a:To s:mustUnderstand=&quot;1&quot;&gt;http://www.w3.org/2005/08/addressing/anonymous&lt;/a:To&gt;
   &lt;/s:Header&gt;
   &lt;s:Body&gt;
     &lt;InitializeEnumerationResponse xmlns=&quot;http://Microsoft.Windows.Ipam&quot;&gt;&lt;/InitializeEnumerationResponse&gt;
   &lt;/s:Body&gt;
 &lt;/s:Envelope&gt;
  
</pre></div>
</dd></dl>

<p>The client sends the following message to start the
enumeration.</p>

<dl>
<dd>
<div><pre> &lt;s:Envelope xmlns:a=&quot;http://www.w3.org/2005/08/addressing&quot; xmlns:s=&quot;http://www.w3.org/2003/05/soap-envelope&quot;&gt;
   &lt;s:Header&gt;
     &lt;a:Action s:mustUnderstand=&quot;1&quot;&gt;http://Microsoft.Windows.Ipam/IIpamEnumerator/StartEnumeration&lt;/a:Action&gt;
   &lt;/s:Header&gt;
   &lt;s:Body&gt;
     &lt;StartEnumeration xmlns=&quot;http://Microsoft.Windows.Ipam&quot; /&gt;
   &lt;/s:Body&gt;
 &lt;/s:Envelope&gt;
  
</pre></div>
</dd></dl>

<p>The server sends the following message to denote the start
of the enumeration.</p>

<dl>
<dd>
<div><pre> &lt;s:Envelope xmlns:s=&quot;http://www.w3.org/2003/05/soap-envelope&quot; xmlns:a=&quot;http://www.w3.org/2005/08/addressing&quot;&gt;
   &lt;s:Header&gt;
     &lt;a:Action s:mustUnderstand=&quot;1&quot;&gt;http://Microsoft.Windows.Ipam/IIpamEnumerator/NotifyEnumerationStart&lt;/a:Action&gt;
     &lt;a:To s:mustUnderstand=&quot;1&quot;&gt;http://www.w3.org/2005/08/addressing/anonymous&lt;/a:To&gt;
   &lt;/s:Header&gt;
   &lt;s:Body&gt;
     &lt;NotifyEnumerationStart xmlns=&quot;http://Microsoft.Windows.Ipam&quot;&gt;&lt;/NotifyEnumerationStart&gt;
   &lt;/s:Body&gt;
 &lt;/s:Envelope&gt;
</pre></div>
</dd></dl>

<p>The following is the EnumeratedRowsCallback message
generated by the server to pass the requested data to the client.</p>

<dl>
<dd>
<div><pre> &lt;s:Envelope xmlns:s=&quot;http://www.w3.org/2003/05/soap-envelope&quot; xmlns:a=&quot;http://www.w3.org/2005/08/addressing&quot;&gt;
   &lt;s:Header&gt;
     &lt;a:Action s:mustUnderstand=&quot;1&quot;&gt;http://Microsoft.Windows.Ipam/IIpamEnumerator/EnumeratedRowsCallback&lt;/a:Action&gt;
     &lt;a:To s:mustUnderstand=&quot;1&quot;&gt;http://www.w3.org/2005/08/addressing/anonymous&lt;/a:To&gt;
   &lt;/s:Header&gt;
   &lt;s:Body&gt;
     &lt;EnumeratedRowsCallback xmlns=&quot;http://Microsoft.Windows.Ipam&quot;&gt;
       &lt;data xmlns:i=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;&gt;
         &lt;IpamObject z:Id=&quot;i1&quot; i:type=&quot;IPv4Range&quot; xmlns:z=&quot;http://schemas.microsoft.com/2003/10/Serialization/&quot;&gt;
           &lt;ModifiedProperties i:nil=&quot;true&quot; xmlns:b=&quot;http://schemas.microsoft.com/2003/10/Serialization/Arrays&quot;&gt;&lt;/ModifiedProperties&gt;
           &lt;SetProperties i:nil=&quot;true&quot; xmlns:b=&quot;http://schemas.microsoft.com/2003/10/Serialization/Arrays&quot;&gt;&lt;/SetProperties&gt;
           &lt;AccessScopeId&gt;1&lt;/AccessScopeId&gt;
           &lt;AddressAssignment&gt;Dynamic&lt;/AddressAssignment&gt;
           &lt;AddressCategory&gt;Private&lt;/AddressCategory&gt;
           &lt;AddressSpaceRecordId&gt;1&lt;/AddressSpaceRecordId&gt;
           &lt;ConnectionSpecificDNSSuffix i:nil=&quot;true&quot;&gt;&lt;/ConnectionSpecificDNSSuffix&gt;
           &lt;CustomFieldValues&gt;
             &lt;CustomFieldValue z:Id=&quot;i2&quot;&gt;
               &lt;ModifiedProperties xmlns:b=&quot;http://schemas.microsoft.com/2003/10/Serialization/Arrays&quot;&gt;
                 &lt;b:string&gt;ParentCustomFieldRecordId&lt;/b:string&gt;
                 &lt;b:string&gt;ParentCustomFieldName&lt;/b:string&gt;
                 &lt;b:string&gt;ParentCustomFieldNumber&lt;/b:string&gt;
                 &lt;b:string&gt;Value&lt;/b:string&gt;
               &lt;/ModifiedProperties&gt;
               &lt;SetProperties xmlns:b=&quot;http://schemas.microsoft.com/2003/10/Serialization/Arrays&quot;&gt;
                 &lt;b:string&gt;ParentCustomFieldRecordId&lt;/b:string&gt;
                 &lt;b:string&gt;ParentCustomFieldName&lt;/b:string&gt;
                 &lt;b:string&gt;ParentCustomFieldNumber&lt;/b:string&gt;
                 &lt;b:string&gt;Value&lt;/b:string&gt;
               &lt;/SetProperties&gt;
               &lt;BuiltInCustomFieldValueId&gt;2&lt;/BuiltInCustomFieldValueId&gt;
               &lt;ParentCustomFieldName&gt;Managed by Service&lt;/ParentCustomFieldName&gt;
               &lt;ParentCustomFieldNumber&gt;8&lt;/ParentCustomFieldNumber&gt;
               &lt;ParentCustomFieldRecordId&gt;9&lt;/ParentCustomFieldRecordId&gt;
               &lt;RecordId&gt;329&lt;/RecordId&gt;
               &lt;Value&gt;MS DHCP&lt;/Value&gt;
             &lt;/CustomFieldValue&gt;
             &lt;CustomFieldValue z:Id=&quot;i3&quot;&gt;
               &lt;ModifiedProperties xmlns:b=&quot;http://schemas.microsoft.com/2003/10/Serialization/Arrays&quot;&gt;
                 &lt;b:string&gt;ParentCustomFieldRecordId&lt;/b:string&gt;
                 &lt;b:string&gt;ParentCustomFieldName&lt;/b:string&gt;
                 &lt;b:string&gt;ParentCustomFieldNumber&lt;/b:string&gt;
                 &lt;b:string&gt;Value&lt;/b:string&gt;
               &lt;/ModifiedProperties&gt;
               &lt;SetProperties xmlns:b=&quot;http://schemas.microsoft.com/2003/10/Serialization/Arrays&quot;&gt;
                 &lt;b:string&gt;ParentCustomFieldRecordId&lt;/b:string&gt;
                 &lt;b:string&gt;ParentCustomFieldName&lt;/b:string&gt;
                 &lt;b:string&gt;ParentCustomFieldNumber&lt;/b:string&gt;
                 &lt;b:string&gt;Value&lt;/b:string&gt;
               &lt;/SetProperties&gt;
               &lt;BuiltInCustomFieldValueId&gt;0&lt;/BuiltInCustomFieldValueId&gt;
               &lt;ParentCustomFieldName&gt;Service Instance&lt;/ParentCustomFieldName&gt;
               &lt;ParentCustomFieldNumber&gt;9&lt;/ParentCustomFieldNumber&gt;
               &lt;ParentCustomFieldRecordId&gt;10&lt;/ParentCustomFieldRecordId&gt;
               &lt;RecordId&gt;441555&lt;/RecordId&gt;
               &lt;Value&gt;rguptsrvtest2.drguptsrvtest3.ipamtest.idc.local&lt;/Value&gt;
             &lt;/CustomFieldValue&gt;
           &lt;/CustomFieldValues&gt;
           &lt;CustomerAddressSpaceName i:nil=&quot;true&quot;&gt;&lt;/CustomerAddressSpaceName&gt;
           &lt;DNSServers xmlns:b=&quot;http://schemas.microsoft.com/2003/10/Serialization/Arrays&quot;&gt;&lt;/DNSServers&gt;
           &lt;DNSSuffixes xmlns:b=&quot;http://schemas.microsoft.com/2003/10/Serialization/Arrays&quot;&gt;&lt;/DNSSuffixes&gt;
           &lt;Description&gt;&lt;/Description&gt;
           &lt;DhcpScopeName&gt;test&lt;/DhcpScopeName&gt;
           &lt;DhcpServerGuid&gt;4562f61c-b373-46de-af73-32fb8a58e893&lt;/DhcpServerGuid&gt;
           &lt;DhcpServerName&gt;rguptsrvtest2.drguptsrvtest3.ipamtest.idc.local&lt;/DhcpServerName&gt;
           &lt;EndIPAddress xmlns:b=&quot;http://schemas.datacontract.org/2004/07/System.Net&quot;&gt;
             &lt;b:m_Address&gt;1677724170&lt;/b:m_Address&gt;
             &lt;b:m_Family&gt;InterNetwork&lt;/b:m_Family&gt;
             &lt;b:m_HashCode&gt;0&lt;/b:m_HashCode&gt;
             &lt;b:m_Numbers xmlns:c=&quot;http://schemas.microsoft.com/2003/10/Serialization/Arrays&quot;&gt;
               &lt;c:unsignedShort&gt;0&lt;/c:unsignedShort&gt;
               &lt;c:unsignedShort&gt;0&lt;/c:unsignedShort&gt;
               &lt;c:unsignedShort&gt;0&lt;/c:unsignedShort&gt;
               &lt;c:unsignedShort&gt;0&lt;/c:unsignedShort&gt;
               &lt;c:unsignedShort&gt;0&lt;/c:unsignedShort&gt;
               &lt;c:unsignedShort&gt;0&lt;/c:unsignedShort&gt;
               &lt;c:unsignedShort&gt;0&lt;/c:unsignedShort&gt;
               &lt;c:unsignedShort&gt;0&lt;/c:unsignedShort&gt;
             &lt;/b:m_Numbers&gt;
             &lt;b:m_ScopeId&gt;0&lt;/b:m_ScopeId&gt;
           &lt;/EndIPAddress&gt;
           &lt;ExclusionRanges&gt;&lt;/ExclusionRanges&gt;
           &lt;Gateways&gt;&lt;/Gateways&gt;
           &lt;IsInheritedAccessScope&gt;true&lt;/IsInheritedAccessScope&gt;
           &lt;IsOverlapping&gt;false&lt;/IsOverlapping&gt;
           &lt;LastAssignedDate i:nil=&quot;true&quot;&gt;&lt;/LastAssignedDate&gt;
           &lt;LastChangeDate&gt;2013-06-06T10:21:03.6654624&lt;/LastChangeDate&gt;
           &lt;LastReclaimRuntime i:nil=&quot;true&quot;&gt;&lt;/LastReclaimRuntime&gt;
           &lt;NumberOfChildAddresses&gt;0&lt;/NumberOfChildAddresses&gt;
           &lt;Owner i:nil=&quot;true&quot;&gt;&lt;/Owner&gt;
           &lt;ParentIPBlockRecordId&gt;151126&lt;/ParentIPBlockRecordId&gt;
           &lt;PartialCustomFieldValues&gt;
             &lt;CustomFieldPartialValue&gt;
               &lt;ParentCustomFieldId&gt;9&lt;/ParentCustomFieldId&gt;
               &lt;Value&gt;MS DHCP&lt;/Value&gt;
               &lt;ValueId&gt;329&lt;/ValueId&gt;
             &lt;/CustomFieldPartialValue&gt;
             &lt;CustomFieldPartialValue&gt;
               &lt;ParentCustomFieldId&gt;10&lt;/ParentCustomFieldId&gt;
               &lt;Value&gt;rguptsrvtest2.drguptsrvtest3.ipamtest.idc.local&lt;/Value&gt;
               &lt;ValueId&gt;441555&lt;/ValueId&gt;
             &lt;/CustomFieldPartialValue&gt;
           &lt;/PartialCustomFieldValues&gt;
           &lt;PrefixLength&gt;8&lt;/PrefixLength&gt;
           &lt;ProviderAddressSpaceName&gt;Default IP Address Space&lt;/ProviderAddressSpaceName&gt;
           &lt;RangeOverlapState&gt;NotOverlapping&lt;/RangeOverlapState&gt;
           &lt;RecordId&gt;262164&lt;/RecordId&gt;
           &lt;ReservedIPRanges xmlns:b=&quot;http://schemas.datacontract.org/2004/07/System&quot;&gt;&lt;/ReservedIPRanges&gt;
           &lt;ReservedIPs xmlns:b=&quot;http://schemas.microsoft.com/2003/10/Serialization/Arrays&quot;&gt;&lt;/ReservedIPs&gt;
           &lt;ScopeRecordId&gt;262142&lt;/ScopeRecordId&gt;
           &lt;StartIPAddress xmlns:b=&quot;http://schemas.datacontract.org/2004/07/System.Net&quot;&gt;
             &lt;b:m_Address&gt;16779786&lt;/b:m_Address&gt;
             &lt;b:m_Family&gt;InterNetwork&lt;/b:m_Family&gt;
             &lt;b:m_HashCode&gt;0&lt;/b:m_HashCode&gt;
             &lt;b:m_Numbers xmlns:c=&quot;http://schemas.microsoft.com/2003/10/Serialization/Arrays&quot;&gt;
               &lt;c:unsignedShort&gt;0&lt;/c:unsignedShort&gt;
               &lt;c:unsignedShort&gt;0&lt;/c:unsignedShort&gt;
               &lt;c:unsignedShort&gt;0&lt;/c:unsignedShort&gt;
               &lt;c:unsignedShort&gt;0&lt;/c:unsignedShort&gt;
               &lt;c:unsignedShort&gt;0&lt;/c:unsignedShort&gt;
               &lt;c:unsignedShort&gt;0&lt;/c:unsignedShort&gt;
               &lt;c:unsignedShort&gt;0&lt;/c:unsignedShort&gt;
               &lt;c:unsignedShort&gt;0&lt;/c:unsignedShort&gt;
             &lt;/b:m_Numbers&gt;
             &lt;b:m_ScopeId&gt;0&lt;/b:m_ScopeId&gt;
           &lt;/StartIPAddress&gt;
           &lt;SubnetId xmlns:b=&quot;http://schemas.datacontract.org/2004/07/System.Net&quot;&gt;
             &lt;b:m_Address&gt;10&lt;/b:m_Address&gt;
             &lt;b:m_Family&gt;InterNetwork&lt;/b:m_Family&gt;
             &lt;b:m_HashCode&gt;0&lt;/b:m_HashCode&gt;
             &lt;b:m_Numbers xmlns:c=&quot;http://schemas.microsoft.com/2003/10/Serialization/Arrays&quot;&gt;
               &lt;c:unsignedShort&gt;0&lt;/c:unsignedShort&gt;
               &lt;c:unsignedShort&gt;0&lt;/c:unsignedShort&gt;
               &lt;c:unsignedShort&gt;0&lt;/c:unsignedShort&gt;
               &lt;c:unsignedShort&gt;0&lt;/c:unsignedShort&gt;
               &lt;c:unsignedShort&gt;0&lt;/c:unsignedShort&gt;
               &lt;c:unsignedShort&gt;0&lt;/c:unsignedShort&gt;
               &lt;c:unsignedShort&gt;0&lt;/c:unsignedShort&gt;
               &lt;c:unsignedShort&gt;0&lt;/c:unsignedShort&gt;
             &lt;/b:m_Numbers&gt;
             &lt;b:m_ScopeId&gt;0&lt;/b:m_ScopeId&gt;
           &lt;/SubnetId&gt;
           &lt;SubnetMask xmlns:b=&quot;http://schemas.datacontract.org/2004/07/System.Net&quot;&gt;
             &lt;b:m_Address&gt;255&lt;/b:m_Address&gt;
             &lt;b:m_Family&gt;InterNetwork&lt;/b:m_Family&gt;
             &lt;b:m_HashCode&gt;0&lt;/b:m_HashCode&gt;
             &lt;b:m_Numbers xmlns:c=&quot;http://schemas.microsoft.com/2003/10/Serialization/Arrays&quot;&gt;
               &lt;c:unsignedShort&gt;0&lt;/c:unsignedShort&gt;
               &lt;c:unsignedShort&gt;0&lt;/c:unsignedShort&gt;
               &lt;c:unsignedShort&gt;0&lt;/c:unsignedShort&gt;
               &lt;c:unsignedShort&gt;0&lt;/c:unsignedShort&gt;
               &lt;c:unsignedShort&gt;0&lt;/c:unsignedShort&gt;
               &lt;c:unsignedShort&gt;0&lt;/c:unsignedShort&gt;
               &lt;c:unsignedShort&gt;0&lt;/c:unsignedShort&gt;
               &lt;c:unsignedShort&gt;0&lt;/c:unsignedShort&gt;
             &lt;/b:m_Numbers&gt;
             &lt;b:m_ScopeId&gt;0&lt;/b:m_ScopeId&gt;
           &lt;/SubnetMask&gt;
           &lt;UseForUtilization&gt;true&lt;/UseForUtilization&gt;
           &lt;UtilizationCalculationType&gt;Auto&lt;/UtilizationCalculationType&gt;
           &lt;UtilizationEventLogStatus&gt;Under&lt;/UtilizationEventLogStatus&gt;
           &lt;UtilizationStatistics z:Id=&quot;i4&quot; i:type=&quot;IPv4Utilization&quot;&gt;
             &lt;EndTime i:nil=&quot;true&quot;&gt;&lt;/EndTime&gt;
             &lt;IsValid&gt;true&lt;/IsValid&gt;
             &lt;StartTime i:nil=&quot;true&quot;&gt;&lt;/StartTime&gt;
             &lt;TotalAssignedAddresses&gt;100&lt;/TotalAssignedAddresses&gt;
             &lt;TotalAvailableAddresses&gt;100&lt;/TotalAvailableAddresses&gt;
             &lt;TotalUtilizedAddresses&gt;0&lt;/TotalUtilizedAddresses&gt;
           &lt;/UtilizationStatistics&gt;
           &lt;VIPRanges xmlns:b=&quot;http://schemas.datacontract.org/2004/07/System&quot;&gt;&lt;/VIPRanges&gt;
           &lt;VIPs xmlns:b=&quot;http://schemas.microsoft.com/2003/10/Serialization/Arrays&quot;&gt;&lt;/VIPs&gt;
           &lt;VirtualizationType&gt;NonVirtualized&lt;/VirtualizationType&gt;
           &lt;WINSServers xmlns:b=&quot;http://schemas.microsoft.com/2003/10/Serialization/Arrays&quot;&gt;&lt;/WINSServers&gt;
         &lt;/IpamObject&gt;
       &lt;/data&gt;
     &lt;/EnumeratedRowsCallback&gt;
   &lt;/s:Body&gt;
 &lt;/s:Envelope&gt;
  
</pre></div>
</dd></dl>

<p>The following is the enumeration completion notification by
the server to the client.</p>

<dl>
<dd>
<div><pre> &lt;s:Envelope xmlns:s=&quot;http://www.w3.org/2003/05/soap-envelope&quot; xmlns:a=&quot;http://www.w3.org/2005/08/addressing&quot;&gt;
   &lt;s:Header&gt;
     &lt;a:Action s:mustUnderstand=&quot;1&quot;&gt;http://Microsoft.Windows.Ipam/IIpamEnumerator/NotifyEnumerationComplete&lt;/a:Action&gt;
     &lt;a:To s:mustUnderstand=&quot;1&quot;&gt;http://www.w3.org/2005/08/addressing/anonymous&lt;/a:To&gt;
   &lt;/s:Header&gt;
   &lt;s:Body&gt;
     &lt;NotifyEnumerationComplete xmlns=&quot;http://Microsoft.Windows.Ipam&quot;&gt;
       &lt;result i:nil=&quot;true&quot; xmlns:i=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;&gt;&lt;/result&gt;
       &lt;exception i:nil=&quot;true&quot; xmlns:i=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;&gt;&lt;/exception&gt;
     &lt;/NotifyEnumerationComplete&gt;
   &lt;/s:Body&gt;
 &lt;/s:Envelope&gt;
  
</pre></div>
</dd></dl>


 </div>
 </div>
 </div>
 </body>
</html>